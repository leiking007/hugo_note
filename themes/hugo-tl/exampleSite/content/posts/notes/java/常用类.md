---
title: "java常用类"
date: 2021-05-14
lastmod: 2021-05-24 12:12:12
draft: false
tags: ['javaSE']
categories: ["笔记"]
author: "lei"
---

# BigDecimal

## 常用构造函数

1. BigDecimal(int)

   创建一个具有参数所指定整数值的对象

2. BigDecimal(double)

   创建一个具有参数所指定双精度值的对象

3. BigDecimal(long)

   创建一个具有参数所指定长整数值的对象

4. BigDecimal(String)

   创建一个具有参数所指定以字符串表示的数值的对象

推荐使用字符串方式构建，这样不会损失精度值

## 常用方法

```java
BigDecimal b1=new BigDecimal("1E11");
BigDecimal b2=new BigDecimal("648");
BigDecimal b3 = b1.divide(b2, 6, RoundingMode.HALF_UP);

b1.subtract(b2);	//减法 -  b1-b2

b1.add(b2);		//加法 +  b1+b2

// RoundingMode.DOWN  向零取舍  1.5->1  -1.5->-1
// RoundingMode.UP  向零反向取舍  1.5->2  -1.5->-2
// RoundingMode.CEILING  向上取舍  1.5->2  -1.5->-1
// RoundingMode.FLOOR  向下取舍  1.5->1  -1.5->-2
// RoundingMode.HALF_UP  向最近的进行取舍，相同向零反向取舍  1.5->2  -1.5->-1  -1.4->-1
// RoundingMode.HALF_DOWN  向最近的进行取舍，相同向零舍入  1.5->1  -1.5->-1  -1.4->-1
// RoundingMode.ROUND_HALF_EVEN  向最近的进行取舍，相同向偶数位取舍  1.5->2  2.5->2  -1.5->-2  -1.6->-3
b1.divide(b2,2, RoundingMode.HALF_DOWN);	//除法 /  b1/b2   保留小数，取舍方式

b1.multiply(b2);	//乘法 *  b1*b2

b3.setScale(3, RoundingMode.HALF_UP);	//设置保留小数，取舍方式

//转换为字符串
b1.toPlainString();		//返回字符串，非科学技术法
b1.toEngineeringString();	//返回字符串，100E+9
b1.toString();		//返回字符串，1E+11
```

## DecimalFormat

|    符号    | 位置       | 本地化? | 含义                                                         |
| :--------: | :--------- | :-----: | :----------------------------------------------------------- |
|     0      | 数字       |   是    | 阿拉伯数字                                                   |
|     #      | 数字       |   是    | 阿拉伯数字如果不存在就显示为空                               |
|     .      | 数字       |   是    | 小数分隔符或货币小数分隔符                                   |
|     -      | 数字       |   是    | 减号                                                         |
|     ,      | 数字       |   是    | 分组分隔符                                                   |
|     E      | 数字       |   是    | 分割科学技术法中的尾数和指数。在前缀和后缀中无需添加引号     |
|     ;      | 子模式边界 |   是    | 分隔正数和负数子模式                                         |
|     %      | 前缀或后缀 |   是    | 乘以100并显示为百分数                                        |
|   \u2030   | 前缀或后缀 |   是    | 乘以1000并显示为千分数                                       |
| ¤ (\u00A4) | 前缀或后缀 |   否    | 货币记号，由货币符号替换。如果两个同时出现，则用国际货币符号替换。如果出现在某个模式中，则使用货币小数分隔符，而不使用小数分隔符 |
|     '      | 前缀或后缀 |   否    | 用于在前缀或或后缀中为特殊字符加引号，例如 "'#'#" 将 123 格式化为 "#123"。要创建单引号本身，请连续使用两个单引号："# o''clock" |

```java
BigDecimal b3=new BigDecimal("154.319444");
new DecimalFormat("0.0\u2030").format(b3);	//154319.4‰
new DecimalFormat("0.0\u00A4").format(b3);	//154.3￥
new DecimalFormat("0.0%").format(b3);	//15431.9%
new DecimalFormat("0.0").format(b3);	//154.3
new DecimalFormat("0.00").format(b3);	//154.32
```



# Logger

Logger 是jdk自带的日志工具

## Logger简单使用

```java
public static final Logger logger= Logger.getLogger(ForkJoinDemo.class.getName());
public void someMethod(){
    logger.info("some msg.....")
}
```



## Logger 简易工具类

```java
public class LogUtil {
    private LogUtil(){}
    public static Logger getLogger(String name){
        Logger logger = Logger.getLogger(name==null?LogUtil.class.getName():name);
        ConsoleHandler handler = new ConsoleHandler();
        try {
            //设置handler编码格式
            handler.setEncoding("utf-8");
            //设置handler打印格式
            handler.setFormatter(new Formatter() {
                @Override
                public String format(LogRecord record) {
                    ZonedDateTime zdt = ZonedDateTime.ofInstant(record.getInstant(), ZoneId.systemDefault());
                    return String.format("%4$tF %4$tR %1$s [%2$s] : %3$s%n",
                            record.getLoggerName(),record.getLevel(),record.getMessage(),zdt);
                }
            });
        } catch (UnsupportedEncodingException ignored) {
        }
        //禁用根 handler
        logger.setUseParentHandlers(false);
        //添加打印控制台的handler
        logger.addHandler(handler);
        logger.getHandlers();
        //设置打印日期的等级
        logger.setLevel(Level.ALL);
        return logger;
    }
}
```

# Optional

## Optional实例

```java
private static void lambda1Test_1(){
    A a=null;

    // NullPointerException
    Optional.of(a).orElse(new A("ofOrElse"));

    // 两者区别，orElseGet是调用其他返回对象，orElse是直接返回对象
    Optional.ofNullable(a).orElse(new A("ofNullableOrElse"));
    Optional.ofNullable(a).orElseGet(() -> new A("ofNullableorElseGet"));


    //为null抛出异常
    Optional.ofNullable(a).orElseThrow();
    //为null抛出，自定义异常
    //Optional.ofNullable(a).orElseThrow(() -> new RuntimeException("值为null"));

    // return value != null
    Optional.ofNullable(a).isPresent();
    //return value == null
    Optional.ofNullable(a).isEmpty();

    //为null 返回传入的 Optional 实例
    Optional.ofNullable(a).or(() -> Optional.of(new A("or")));

}
```

